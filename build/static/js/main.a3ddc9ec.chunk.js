(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[0],{141:function(e,t,a){e.exports=a.p+"static/media/invisible.629cbd8d.svg"},142:function(e,t,a){e.exports=a.p+"static/media/visible.320fe8b0.svg"},143:function(e,t,a){e.exports=a.p+"static/media/onlyThis.af0d8e87.svg"},172:function(e,t,a){e.exports=a(360)},177:function(e,t,a){},178:function(e,t,a){},360:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(52),o=a.n(s),i=(a(177),a(7)),c=a(8),l=a(10),m=a(9),p=(a(178),r.a.Component,a(16)),u=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(p.d,{width:"100%",height:300},r.a.createElement(p.c,{data:this.props.data},this.props.viewLines.map((function(e){if(e.show)return r.a.createElement(p.b,{dataKey:e.name,key:e.name,stroke:e.color,dot:!1})})),r.a.createElement(p.a,{stroke:"#ccc"}),r.a.createElement(p.f,{dataKey:"data"}),this.props.viewPercentages?r.a.createElement(p.g,{unit:"%"}):r.a.createElement(p.g,null),r.a.createElement(p.e,null)))}}]),a}(r.a.Component),d=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,Object.keys(this.props.data).map((function(t){return r.a.createElement("div",{key:t,className:"col-xl-6 pb-5"},r.a.createElement("h1",null,t.charAt(0).toUpperCase()+t.slice(1).replace("-"," ").replace("_"," ")),r.a.createElement(u,{viewPercentages:e.props.viewPercentages,name:t,data:e.props.data[t],viewLines:e.props.viewLines}))})))}}]),a}(r.a.Component),h=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return"right"==this.props.location?r.a.createElement("div",{className:"ml-auto my-auto"},r.a.createElement("button",{className:this.props.data.to!=this.props.data.tot_rows?"btn btn-success":"btn btn-success invisible",onClick:function(){var t=e.props.data.from+e.props.data.number,a=t+e.props.data.number;a>e.props.data.tot_rows&&(a=e.props.data.tot_rows),e.props.onclick({to:a,from:t})}},"--\x3e"),r.a.createElement("button",{className:this.props.data.to!=this.props.data.tot_rows?"btn btn-success ml-2":"btn btn-success ml-2 invisible",onClick:function(){var t=e.props.data.tot_rows,a=t-e.props.data.number;a<0&&(t=0),e.props.onclick({to:t,from:a})}},"==>")):"left"==this.props.location?r.a.createElement("div",{className:"mr-auto my-auto"},r.a.createElement("button",{className:0!=this.props.data.from?"btn btn-success mr-2":"btn btn-success mr-2 invisible",onClick:function(){var t=0+e.props.data.number;t>e.props.data.tot_rows&&(t=e.props.data.tot_rows),e.props.onclick({to:t,from:0})}},"<=="),r.a.createElement("button",{className:0!=this.props.data.from?"btn btn-success":"btn btn-success invisible",onClick:function(){var t=e.props.data.from-e.props.data.number;t<0&&(t=0);var a=t+e.props.data.number;e.props.onclick({to:a,from:t})}},"<--")):""}}]),a}(r.a.Component),b=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("p",null,"Scegli quante righe vedere:"),r.a.createElement("div",{className:"btn-group btn-group-toggle mx-auto","data-toggle":"buttons"},this.props.range.map((function(t){return r.a.createElement("label",{className:"btn btn-success",key:t},r.a.createElement("input",Object.assign({type:"radio",id:t,autoComplete:"off"},(function(){if(t==e.props.number)return"checked"}),{onClick:function(){if("Tutti"!=t){var a=e.props.selection.from,n=a+t;n>e.props.selection.tot_rows&&(a=(n=e.props.selection.tot_rows)-t),e.props.onclick({number:t,from:a,to:n})}else e.props.onclick({number:e.props.selection.tot_rows,from:0,to:e.props.selection.tot_rows})}})),t)}))))}}]),a}(r.a.Component),v=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).changeview=function(e){n.setState(e)},n.state={from:0,to:25,number:25,tot_rows:Object.keys(e.data).length},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-12 scroll"},r.a.createElement("h1",null,this.props.name),r.a.createElement("p",null,"Mostro le righe da ",this.state.from," a ",this.state.to," di ",this.state.tot_rows," "),r.a.createElement("div",{className:"d-none d-sm-block"},r.a.createElement("div",{className:"row pb-2"},r.a.createElement(h,{location:"left",data:this.state,onclick:this.changeview}),r.a.createElement(b,{range:[25,50,100,250,500,"Tutti"],onclick:this.changeview,selection:this.state}),r.a.createElement(h,{location:"right",data:this.state,onclick:this.changeview}))),r.a.createElement("div",{className:"d-sm-none"},r.a.createElement(b,{range:[25,50,100,250,500,"Tutti"],onclick:this.changeview,selection:this.state}),r.a.createElement("div",{className:"row py-2"},r.a.createElement(h,{location:"left",data:this.state,onclick:this.changeview}),r.a.createElement(h,{location:"right",data:this.state,onclick:this.changeview}))),r.a.createElement("table",{className:"table table-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{key:"data"},"Data"),r.a.createElement("th",{key:"regione"},"Regione"),Object.keys(this.props.data[0]).map((function(e){if("Data"!=e&&"Regione"!=e)return r.a.createElement("th",{key:e},e.replace(/_/g," "))})))),r.a.createElement("tbody",null,this.props.data.slice(this.state.from,this.state.to).map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{key:"data"},new Date(t.Data).toLocaleDateString()),r.a.createElement("td",{key:"regione"},t.Regione.replace(/-/g," ").replace("_","'")),Object.keys(t).map((function(a){if("Data"!=a&&"Regione"!=a)return"Variazione"==e.props.name?r.a.createElement("td",{key:a},t[a]<=0?t[a]:"+".concat(t[a])):r.a.createElement("td",{key:a},t[a])}))))})))),r.a.createElement("div",{className:"row pb-2"},r.a.createElement(h,{location:"left",data:this.state,onclick:this.changeview}),r.a.createElement(h,{location:"right",data:this.state,onclick:this.changeview})))}}]),a}(r.a.Component),g=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"rounded green mt-2 control-panel p-2 align-items-center justify-content-center d-none d-md-flex"},r.a.createElement("button",{className:"btn btn-success border mr-auto",onClick:this.props.actionShowSidebar},"\xa0",this.props.viewSidebar?"Chiudi":"Apri"," menu","\xa0"),r.a.createElement("h1",{className:"inline"},"Dati pandemia Covid-19"),r.a.createElement("button",{type:"button",className:"raw"==this.props.mode?"btn btn-success border ml-auto invisible":"btn btn-success border ml-auto","data-toggle":"modal","data-target":"#selectData"},"Cambia dati")),r.a.createElement("div",{className:"rounded green mt-2 control-panel p-2 justify-content-center d-md-none"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"Dati pandemia Covid-19")),r.a.createElement("div",{className:"col-12 align-items-center d-flex"},r.a.createElement("button",{className:"btn btn-success border mr-auto",onClick:this.props.actionShowSidebar},"\xa0",this.props.viewSidebar?"Chiudi":"Apri"," menu","\xa0"),r.a.createElement("button",{type:"button",className:"raw"==this.props.mode?"btn btn-success border ml-auto invisible":"btn btn-success border ml-auto","data-toggle":"modal","data-target":"#selectData"},"Cambia dati"))))}}]),a}(r.a.Component),f=a(141),w=a.n(f),E=a(142),k=a.n(E),y=a(143),j=a.n(y),O=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("tr",{key:this.props.item.name},r.a.createElement("td",null,r.a.createElement("span",{className:"rounded-pill align-middle mr-2",style:{backgroundColor:this.props.item.color,color:this.props.item.color,fontSize:5}},"ProvaProva")),r.a.createElement("td",{className:"my-auto align-middle text-left"},r.a.createElement("small",null,this.props.item.name.replace(/-/g," ").replace("_","'"))),r.a.createElement("td",null,r.a.createElement("button",{class:"btn btn-sm",onClick:function(){e.props.changeState({viewLines:e.props.viewLines.map((function(t){return e.props.item.name!=t.name?t:{name:e.props.item.name,show:!e.props.item.show,color:e.props.item.color}}))})}},r.a.createElement("img",{height:18,width:18,src:this.props.item.show?k.a:w.a,alt:this.props.item.show?"Nascondi":"Mostra","data-toggle":"tooltip",title:this.props.item.show?"Nascondi":"Mostra"}))),r.a.createElement("td",null,r.a.createElement("button",{class:"btn btn.sm",onClick:function(){e.props.changeState({viewLines:e.props.viewLines.map((function(t){return e.props.item.name!=t.name?{name:t.name,show:!1,color:t.color}:{name:t.name,show:!0,color:t.color}}))})}},r.a.createElement("img",{height:18,width:18,src:j.a,alt:"Solo questo","data-toggle":"tooltip",title:"Mostra solo questo"}))))}}]),a}(r.a.Component),N=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"green vheight-100 rounded mt-3 control-panel col"},r.a.createElement("h6",{className:"pt-2"},"Visualizza come:"),r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},r.a.createElement("label",{className:"raw"==this.props.selectedMode?"btn btn-success border active":"btn btn-success border"},r.a.createElement("input",{type:"radio",defaultChecked:"raw"==this.props.selectedMode,onClick:function(){e.props.changeMode("raw"),e.props.actionShowSidebar()}}),"Database"),r.a.createElement("label",{className:"graph"==this.props.selectedMode?"btn btn-success border active":"btn btn-success border"},r.a.createElement("input",{type:"radio",defaultChecked:"graph"==this.props.selectedMode,onClick:function(){e.props.changeMode("graph"),e.props.actionShowSidebar()}}),"Grafici")),"raw"==this.props.selectedMode?r.a.createElement("p",{className:"my-3"},'Non ci sono altre impostazioni per la modali\xe0 "Database"'):"","graph"==this.props.selectedMode?r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("h6",null,"Visualizza i dati di:"),r.a.createElement("table",{className:"mx-auto mt-2"},r.a.createElement("tbody",null,r.a.createElement(O,{item:this.props.viewLines.find((function(e){return"Italia"==e.name})),viewLines:this.props.viewLines,changeState:this.props.changeState}),this.props.viewLines.map((function(t){if("Italia"!=t.name)return r.a.createElement(O,{item:t,viewLines:e.props.viewLines,changeState:e.props.changeState})}))))):"")}}]),a}(r.a.Component),C=a(40),S=a.n(C),x=a(82),L=function(){var e=Object(x.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/raw");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,!t.ok){e.next=10;break}return e.abrupt("return",a);case 10:throw a;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(x.a)(S.a.mark((function e(t,a,n,r,s){var o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/values?from=".concat(t,"&to=").concat(a,"&params=").concat(n,"&table=").concat(r,"&percentage=").concat(s));case 2:return o=e.sent,e.next=5,o.json();case 5:if(i=e.sent,!o.ok){e.next=10;break}return e.abrupt("return",i);case 10:throw i;case 11:case"end":return e.stop()}}),e)})));return function(t,a,n,r,s){return e.apply(this,arguments)}}(),F=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).showSidebar=function(){n.setState((function(e){return{showBar:!e.showBar}}))},n.alterState=function(e){n.setState(e)},n.changeMode=function(e){n.setState({loading:!0}),"raw"==e?L().then((function(e){n.setState({data:e,loading:!1,viewLines:[],viewMode:"raw"})})):"graph"==e&&M(n.state.startDate,n.state.endDate,n.state.graphList,n.state.graphData,n.state.percentage).then((function(e){n.setState({data:e,loading:!1,viewLines:n.getViewLines(e),viewMode:"graph"})}))},n.getViewLines=function(e){var t=Object.keys(e[Object.keys(e)[0]][0]);return t.splice(t.indexOf("data"),1),t.map((function(e){var t;switch(e){case"Abruzzo":t="#C00000";break;case"Basilicata":t="#FF0000";break;case"Calabria":t="#C55A11";break;case"Campania":t="#FF9900";break;case"Emilia-Romagna":t="#FFD966";break;case"Friuli-Venezia-Giulia":t="#9FBA16";break;case"Lazio":t="#548235";break;case"Liguria":t="#004C00";break;case"Lombardia":t="#009A46";break;case"Marche":t="#0A7C66";break;case"Molise":t="#08B896";break;case"Piemonte":t="#00B0F0";break;case"Puglia":t="#0070C0";break;case"Sardegna":t="#3333CC";break;case"Sicilia":t="#002060";break;case"Toscana":case"Trentino-Alto-Adige":t="#7030A0";break;case"Umbria":t="#D60093";break;case"Valle-d_Aosta":t="#FF00FF";break;case"Veneto":t="#FF7DFF";break;default:t="#000"}return"Italia"==e?{name:e,show:!0,color:t}:{name:e,show:!1,color:t}}))},n.state={data:{},viewLines:[],viewMode:"graph",loading:!0,error:!1,showBar:!1,graphList:"Nuovi_positivi, Positivi",startDate:"2020-02-24",endDate:"2020-10-30",graphData:"STORICO",percentage:!1},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App container-fluid px-xl-3 vheight-100"},this.iserror())}},{key:"iserror",value:function(){return this.state.error?r.a.createElement("p",null,"Errore con il server"):r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{mode:this.state.viewMode,actionShowSidebar:this.showSidebar,viewSidebar:this.state.showBar}),this.state.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"})))):r.a.createElement(r.a.Fragment,null,this.state.showBar?r.a.createElement("div",{className:"container-fluid row ml-0 px-0 vheight-100"},r.a.createElement("aside",{className:"col-12 col-md-4 col-xl-3 d-md-block d-flex align-items-stretch mb-3 mb-sm-0"},r.a.createElement(N,{changeMode:this.changeMode,actionShowSidebar:this.showSidebar,selectedMode:this.state.viewMode,viewLines:this.state.viewLines,changeState:this.alterState})),r.a.createElement("span",{className:"col-xl-9 col-md-8 px-0"},this.viewThing())):r.a.createElement(r.a.Fragment,null,this.viewThing())))}},{key:"viewThing",value:function(){switch(this.state.viewMode){case"graph":return r.a.createElement("div",{className:"row pr-2 pr-xl-5"},r.a.createElement(d,{data:this.state.data,viewLines:this.state.viewLines,viewPercentages:this.state.percentage}));case"raw":return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{name:"Dati",data:this.state.data.data})," ",r.a.createElement("div",{className:"py-5"}),r.a.createElement(v,{name:"Variazione",data:this.state.data.variation})," ");default:return""}}},{key:"componentDidMount",value:function(){this.changeMode("graph")}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[172,1,2]]]);
//# sourceMappingURL=main.a3ddc9ec.chunk.js.map